<section class="todo-list-section">
  <div class="card-container">
    <div class="card-list-header">
      <h2>Todo</h2>
      <p class="AddTodo">+</p>
    </div>
     <div id="list-todo"></div> 
     <div>
  </div>
  </div>
  <div class="card-container">
    <div class="card-list-header">
      <h2>In progress</h2>
        <p class="AddInProgress">+</p>
    </div>
   <div id="list-inprogress"></div> 
  </div>
  <div class="card-container">
    <div class="card-list-header">
      <h2>Done</h2>
        <p class="AddDone">+</p>
    </div>
    <div id="list-done"></div>
  </div>
</section>

<style>
  .todo-list-section{
    display: flex;
    justify-content: center;
    margin-left: 20px;
    margin-right:20px;
    min-height: 300px;
  }
  .card-list-header{
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .todo-list-section p{
    font-size: 30px;
  }
</style>

<script>
import { taskList } from '../index.ts'

taskList.renderTasks();

  const todoList = document.getElementById('list-todo');
  const inProgressList = document.getElementById('list-inprogress');
  const doneList = document.getElementById('list-done');

  if (todoList) {
    todoList.addEventListener('dragover', (event) => taskList.onDragOver(event));
    todoList.addEventListener('drop', (event) => taskList.onDrop(event, 'Todo'));
  }

  if (inProgressList) {
    inProgressList.addEventListener('dragover', (event) => taskList.onDragOver(event));
    inProgressList.addEventListener('drop', (event) => taskList.onDrop(event, 'Inprogress'));
  }

  if (doneList) {
    doneList.addEventListener('dragover', (event) => taskList.onDragOver(event));
    doneList.addEventListener('drop', (event) => taskList.onDrop(event, 'Done'));
  }


let tmpNumber = 1;
function handleAddClick(status:string) {
  const newTask ={
    id: taskList.tasks.length + 1,
    title:`title${tmpNumber}`,
    description:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Laudantium totam voluptatibus illo eos qui ?",
    status:status
  }  

  taskList.addTask(newTask)
  tmpNumber++
}

document.querySelector(".AddTodo")?.addEventListener('click', () => handleAddClick("Todo"));
document.querySelector(".AddInProgress")?.addEventListener('click', () => handleAddClick("Inprogress"));
document.querySelector(".AddDone")?.addEventListener('click', () => handleAddClick("Done"));
</script>
